@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide scrollbar for question navigation */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}

/* Line clamp utility */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Responsive Typography */
@layer base {
  html {
    font-size: 14px;
  }
  
  @media (min-width: 640px) {
    html {
      font-size: 16px;
    }
  }
}

/* Touch-friendly interactions for mobile */
@layer utilities {
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  @media (max-width: 640px) {
    /* Ensure minimum touch target size on mobile */
    button, a, [role="button"] {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Better spacing for mobile */
    .space-y-1 > * + * {
      margin-top: 0.375rem;
    }
    
    .space-y-2 > * + * {
      margin-top: 0.5rem;
    }
  }
}

/* Responsive dialog sizing */
@layer components {
  @media (max-width: 640px) {
    [role="dialog"] {
      max-width: calc(100vw - 2rem) !important;
      max-height: calc(100vh - 2rem) !important;
      margin: 1rem;
    }
  }
}

/* Better scrolling on mobile */
@layer utilities {
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
  }
}

/* Prose content styling for lessons */
@layer components {
  .prose-content {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    word-break: break-word !important;
    max-width: 100% !important;
    width: 100%;
    box-sizing: border-box;
    overflow-x: hidden;
  }
  
  .prose-content * {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
    box-sizing: border-box;
  }
  
  .prose-content p {
    margin: 0.75rem 0;
    line-height: 1.6;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    white-space: normal;
  }
  
  .prose-content p:first-child {
    margin-top: 0;
  }
  
  .prose-content p:last-child {
    margin-bottom: 0;
  }
  
  .prose-content strong {
    font-weight: 600;
    color: #1f2937;
    display: inline;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
  }
  
  .prose-content ul,
  .prose-content ol {
    margin: 0.75rem 0;
    padding-left: 1.5rem;
    padding-right: 0;
    list-style-position: outside;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
  
  .prose-content ul {
    list-style-type: disc;
  }
  
  .prose-content ol {
    list-style-type: decimal;
  }
  
  .prose-content li {
    margin: 0.5rem 0;
    line-height: 1.6;
    padding-left: 0.375rem;
    padding-right: 0;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    white-space: normal;
    max-width: 100%;
  }
  
  .prose-content li strong {
    font-weight: 600;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
  }
  
  /* Mobile-specific improvements */
  @media (max-width: 640px) {
    .prose-content {
      font-size: 0.9375rem;
      line-height: 1.65;
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    
    .prose-content p {
      margin: 0.625rem 0;
    }
    
    .prose-content ul,
    .prose-content ol {
      padding-left: 1.25rem;
      padding-right: 0.5rem;
      margin: 0.625rem 0;
    }
    
    .prose-content li {
      margin: 0.375rem 0;
      padding-left: 0.25rem;
      padding-right: 0;
    }
  }
}

/* Prose improvements for small screens */
@layer components {
  .prose {
    @apply max-w-none;
  }
  
  @media (max-width: 640px) {
    .prose {
      font-size: 0.875rem;
      line-height: 1.5;
    }
    
    .prose p {
      margin-top: 0.75rem;
      margin-bottom: 0.75rem;
    }
    
    .prose ul {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .prose li {
      margin-top: 0.25rem;
      margin-bottom: 0.25rem;
    }
  }
}

/* Smooth transitions */
@layer utilities {
  .transition-smooth {
    transition: all 0.2s ease-in-out;
  }
}

/* Custom breakpoint for extra small devices */
@media (min-width: 475px) {
  .xs\:inline {
    display: inline;
  }
  
  .xs\:hidden {
    display: none;
  }
}

/* Better focus indicators for accessibility */
@layer utilities {
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }
}

/* Prevent layout shift from scrollbar */
@layer base {
  html {
    overflow-y: scroll;
  }
}

/* Mobile-first font scaling */
@layer utilities {
  .text-responsive-xs {
    font-size: clamp(0.625rem, 2vw, 0.75rem);
  }
  
  .text-responsive-sm {
    font-size: clamp(0.75rem, 2.5vw, 0.875rem);
  }
  
  .text-responsive-base {
    font-size: clamp(0.875rem, 3vw, 1rem);
  }
  
  .text-responsive-lg {
    font-size: clamp(1rem, 3.5vw, 1.125rem);
  }
}

/* Improve mobile menu interactions */
@layer utilities {
  @media (hover: none) {
    button:hover {
      @apply bg-inherit;
    }
    
    button:active {
      @apply scale-95;
    }
  }
}

/* Prevent zoom on input focus for mobile */
@layer base {
  @media (max-width: 768px) {
    input[type="text"],
    input[type="search"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="tel"],
    input[type="url"],
    textarea {
      font-size: 16px !important;
    }
    
    /* Allow text wrapping and growth for inputs/textarea */
    .input-no-zoom,
    .textarea-wrap {
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
  }
}

/* Textarea wrapping and auto-growing */
@layer components {
  textarea.textarea-wrap {
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
    resize: none;
    min-height: 80px;
    max-height: 300px;
    overflow-y: auto;
  }
  
  /* For single-line inputs that should wrap and grow */
  input.input-wrap {
    white-space: normal;
    word-wrap: break-word;
    overflow-wrap: break-word;
    height: auto;
    min-height: 40px;
    max-height: 200px;
    overflow-y: auto;
    padding-top: 8px;
    padding-bottom: 8px;
    line-height: 1.5;
  }
  
  /* Facebook-style verification badge - circular with many small sharp edges (scalloped) */
  /* Creates a circular shape with 16 scallops - alternating between outer radius (50%) and inner radius (47%) */
  .facebook-verified-badge {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    /* 32-point scalloped circle - 16 outer points alternating with 16 inner points at 22.5Â° intervals */
    clip-path: polygon(
      50% 0%,      /* Top outer */
      51.65% 1.74%, /* Inner */
      53.26% 0%,    /* Outer */
      54.83% 1.91%, /* Inner */
      56.34% 0%,    /* Outer */
      57.81% 2.08%, /* Inner */
      59.26% 0%,    /* Outer */
      60.67% 2.26%, /* Inner */
      62.04% 0%,    /* Outer */
      63.37% 2.43%, /* Inner */
      64.66% 0%,    /* Outer */
      65.91% 2.61%, /* Inner */
      67.1% 0%,     /* Outer */
      68.24% 2.78%, /* Inner */
      69.34% 0%,    /* Outer */
      70.38% 2.96%, /* Inner */
      71.37% 0%,    /* Outer */
      72.32% 3.13%, /* Inner */
      73.22% 0%,    /* Outer */
      74.06% 3.31%, /* Inner */
      74.88% 0%,    /* Outer */
      75.64% 3.48%, /* Inner */
      76.34% 0%,    /* Outer */
      77% 3.66%,    /* Inner */
      77.59% 0%,    /* Outer */
      78.14% 3.83%, /* Inner */
      78.63% 0%,    /* Outer */
      79.08% 4%,    /* Inner */
      79.5% 0%,     /* Outer */
      79.88% 4.17%, /* Inner */
      80.19% 0%,    /* Outer */
      80.47% 4.35%, /* Inner */
      80.69% 0%,    /* Outer */
      80.88% 4.52%, /* Inner */
      80.99% 0%,    /* Outer */
      81.05% 4.69%, /* Inner */
      81.05% 0%,    /* Outer */
      81% 4.87%,    /* Inner - right side starts */
      80.88% 5.05%, /* Outer */
      80.69% 5.22%, /* Inner */
      80.47% 5.39%, /* Outer */
      80.19% 5.57%, /* Inner */
      79.88% 5.74%, /* Outer */
      79.5% 5.91%,  /* Inner */
      79.08% 6.09%, /* Outer */
      78.63% 6.26%, /* Inner */
      78.14% 6.43%, /* Outer */
      77.59% 6.61%, /* Inner */
      77% 6.78%,   /* Outer */
      76.34% 6.96%, /* Inner */
      75.64% 7.13%, /* Outer */
      74.88% 7.31%, /* Inner */
      74.06% 7.48%, /* Outer */
      73.22% 7.66%, /* Inner */
      72.32% 7.83%, /* Outer */
      71.37% 8%,    /* Inner */
      70.38% 8.17%, /* Outer */
      69.34% 8.35%, /* Inner */
      68.24% 8.52%, /* Outer */
      67.1% 8.69%,  /* Inner */
      65.91% 8.87%, /* Outer */
      64.66% 9.05%, /* Inner */
      63.37% 9.22%, /* Outer */
      62.04% 9.39%, /* Inner */
      60.67% 9.57%, /* Outer */
      59.26% 9.74%, /* Inner */
      57.81% 9.91%, /* Outer */
      56.34% 10.09%,/* Inner */
      54.83% 10.26%,/* Outer */
      53.26% 10.43%,/* Inner */
      51.65% 10.61%,/* Outer */
      50% 10.78%,   /* Inner - bottom starts */
      48.35% 10.61%,/* Outer */
      46.74% 10.43%,/* Inner */
      45.17% 10.26%,/* Outer */
      43.66% 10.09%,/* Inner */
      42.19% 9.91%, /* Outer */
      40.74% 9.74%, /* Inner */
      39.33% 9.57%, /* Outer */
      37.96% 9.39%, /* Inner */
      36.63% 9.22%, /* Outer */
      35.34% 9.05%, /* Inner */
      34.09% 8.87%, /* Outer */
      32.9% 8.69%,  /* Inner */
      31.76% 8.52%, /* Outer */
      30.66% 8.35%, /* Inner */
      29.62% 8.17%, /* Outer */
      28.63% 8%,    /* Inner */
      27.68% 7.83%, /* Outer */
      26.78% 7.66%, /* Inner */
      25.94% 7.48%, /* Outer */
      25.12% 7.31%, /* Inner */
      24.36% 7.13%, /* Outer */
      23.66% 6.96%, /* Inner */
      23% 6.78%,    /* Outer */
      22.41% 6.61%, /* Inner */
      21.86% 6.43%, /* Outer */
      21.37% 6.26%, /* Inner */
      20.92% 6.09%, /* Outer */
      20.5% 5.91%,  /* Inner */
      20.12% 5.74%, /* Outer */
      19.81% 5.57%, /* Inner */
      19.53% 5.39%, /* Outer */
      19.31% 5.22%, /* Inner */
      19.12% 5.05%, /* Outer */
      19% 4.87%,    /* Inner - left side starts */
      18.95% 4.69%, /* Outer */
      18.95% 4.52%, /* Inner */
      19.01% 4.35%, /* Outer */
      19.13% 4.17%, /* Inner */
      19.31% 4%,    /* Outer */
      19.53% 3.83%, /* Inner */
      19.81% 3.66%, /* Outer */
      20.12% 3.48%, /* Inner */
      20.5% 3.31%,  /* Outer */
      20.92% 3.13%, /* Inner */
      21.37% 2.96%, /* Outer */
      21.86% 2.78%, /* Inner */
      22.41% 2.61%, /* Outer */
      23% 2.43%,    /* Inner */
      23.66% 2.26%, /* Outer */
      24.36% 2.08%, /* Inner */
      25.12% 1.91%, /* Outer */
      25.94% 1.74%, /* Inner */
      26.78% 1.57%, /* Outer */
      27.68% 1.39%, /* Inner */
      28.63% 1.22%, /* Outer */
      29.62% 1.05%, /* Inner */
      30.66% 0.87%, /* Outer */
      31.76% 0.7%,  /* Inner */
      32.9% 0.52%,  /* Outer */
      34.09% 0.35%, /* Inner */
      35.34% 0.17%, /* Outer */
      36.63% 0%,    /* Inner - back to top */
      37.96% 0.17%, /* Outer */
      39.33% 0%,    /* Inner */
      40.74% 0.17%, /* Outer */
      42.19% 0%,    /* Inner */
      43.66% 0.17%, /* Outer */
      45.17% 0%,    /* Inner */
      46.74% 0.17%, /* Outer */
      48.35% 0%     /* Inner - completes circle */
    );
    -webkit-clip-path: polygon(
      50% 0%, 51.65% 1.74%, 53.26% 0%, 54.83% 1.91%, 56.34% 0%, 57.81% 2.08%, 59.26% 0%, 60.67% 2.26%, 62.04% 0%, 63.37% 2.43%, 64.66% 0%, 65.91% 2.61%, 67.1% 0%, 68.24% 2.78%, 69.34% 0%, 70.38% 2.96%, 71.37% 0%, 72.32% 3.13%, 73.22% 0%, 74.06% 3.31%, 74.88% 0%, 75.64% 3.48%, 76.34% 0%, 77% 3.66%, 77.59% 0%, 78.14% 3.83%, 78.63% 0%, 79.08% 4%, 79.5% 0%, 79.88% 4.17%, 80.19% 0%, 80.47% 4.35%, 80.69% 0%, 80.88% 4.52%, 80.99% 0%, 81.05% 4.69%, 81.05% 0%, 81% 4.87%, 80.88% 5.05%, 80.69% 5.22%, 80.47% 5.39%, 80.19% 5.57%, 79.88% 5.74%, 79.5% 5.91%, 79.08% 6.09%, 78.63% 6.26%, 78.14% 6.43%, 77.59% 6.61%, 77% 6.78%, 76.34% 6.96%, 75.64% 7.13%, 74.88% 7.31%, 74.06% 7.48%, 73.22% 7.66%, 72.32% 7.83%, 71.37% 8%, 70.38% 8.17%, 69.34% 8.35%, 68.24% 8.52%, 67.1% 8.69%, 65.91% 8.87%, 64.66% 9.05%, 63.37% 9.22%, 62.04% 9.39%, 60.67% 9.57%, 59.26% 9.74%, 57.81% 9.91%, 56.34% 10.09%, 54.83% 10.26%, 53.26% 10.43%, 51.65% 10.61%, 50% 10.78%, 48.35% 10.61%, 46.74% 10.43%, 45.17% 10.26%, 43.66% 10.09%, 42.19% 9.91%, 40.74% 9.74%, 39.33% 9.57%, 37.96% 9.39%, 36.63% 9.22%, 35.34% 9.05%, 34.09% 8.87%, 32.9% 8.69%, 31.76% 8.52%, 30.66% 8.35%, 29.62% 8.17%, 28.63% 8%, 27.68% 7.83%, 26.78% 7.66%, 25.94% 7.48%, 25.12% 7.31%, 24.36% 7.13%, 23.66% 6.96%, 23% 6.78%, 22.41% 6.61%, 21.86% 6.43%, 21.37% 6.26%, 20.92% 6.09%, 20.5% 5.91%, 20.12% 5.74%, 19.81% 5.57%, 19.53% 5.39%, 19.31% 5.22%, 19.12% 5.05%, 19% 4.87%, 18.95% 4.69%, 18.95% 4.52%, 19.01% 4.35%, 19.13% 4.17%, 19.31% 4%, 19.53% 3.83%, 19.81% 3.66%, 20.12% 3.48%, 20.5% 3.31%, 20.92% 3.13%, 21.37% 2.96%, 21.86% 2.78%, 22.41% 2.61%, 23% 2.43%, 23.66% 2.26%, 24.36% 2.08%, 25.12% 1.91%, 25.94% 1.74%, 26.78% 1.57%, 27.68% 1.39%, 28.63% 1.22%, 29.62% 1.05%, 30.66% 0.87%, 31.76% 0.7%, 32.9% 0.52%, 34.09% 0.35%, 35.34% 0.17%, 36.63% 0%, 37.96% 0.17%, 39.33% 0%, 40.74% 0.17%, 42.19% 0%, 43.66% 0.17%, 45.17% 0%, 46.74% 0.17%, 48.35% 0%
    );
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
    -webkit-filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
  }
}
